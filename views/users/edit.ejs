<%- include('../layouts/header') %>
<div class="row justify-content-center">
  <div class="col-md-6">
    <div class="card shadow-sm">
      <div class="card-body">
        <h2 class="card-title mb-4 text-center">Edit Profile</h2>
        <% if (success) { %>
          <div class="alert alert-success"><%= success %></div>
        <% } %>
        <% if (error) { %>
          <div class="alert alert-danger"><%= error %></div>
        <% } %>
        <form action="/users/edit" method="POST">
          <!-- Name -->
          <div class="mb-3">
            <label for="name" class="form-label">Name</label>
            <input
              type="text"
              class="form-control"
              id="name"
              name="name"
              value="<%= user.name %>"
              required
            />
          </div>
          <!-- Email -->
          <div class="mb-3">
            <label for="email" class="form-label">Email</label>
            <input
              type="email"
              class="form-control"
              id="email"
              name="email"
              value="<%= user.email %>"
              required
            />
          </div>
          <!-- New Password -->
          <div class="mb-3">
            <label for="password" class="form-label">New Password</label>
            <input
              type="password"
              class="form-control"
              id="password"
              name="password"
              placeholder="Leave blank to keep current"
            />
          </div>
          <!-- Submit Button -->
          <div class="d-grid">
            <button type="submit" class="btn btn-primary btn-lg">
              Save Changes
            </button>
          </div>
        </form>
        <div class="d-flex justify-content-between align-items-center mt-4">
          <!-- Delete Account button -->
          <button
            type="button"
            class="btn btn-danger"
            data-bs-toggle="modal"
            data-bs-target="#deleteModal"
          >
            Delete Account
          </button>
          <!-- Cancel button -->
          <div class="text-center">
            <a href="/" class="btn btn-secondary">Cancel</a>
          </div>
        </div>

        <!-- Modal Konfirmasi Delete -->
        <div
          class="modal fade"
          id="deleteModal"
          tabindex="-1"
          aria-labelledby="deleteModalLabel"
          aria-hidden="true"
        >
          <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title text-danger" id="deleteModalLabel">
                  Confirm Account Deletion
                </h5>
                <button
                  type="button"
                  class="btn-close"
                  data-bs-dismiss="modal"
                  aria-label="Close"
                ></button>
              </div>
              <div class="modal-body">
                Are you sure you want to delete your account? This action cannot
                be undone.
              </div>
              <div class="modal-footer">
                <button
                  type="button"
                  class="btn btn-secondary"
                  data-bs-dismiss="modal"
                >
                  Cancel
                </button>
                <form action="/users/delete" method="POST">
                  <!-- Bisa tambahkan CSRF token jika perlu -->
                  <button type="submit" class="btn btn-danger">
                    Delete Account
                  </button>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<%- include('../layouts/footer') %>
