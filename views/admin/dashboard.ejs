<%- include('../layouts/header') %>
<h2>Admin Dashboard</h2>

<h4 class="mt-4">All Users</h4>
<table class="table table-striped">
  <thead>
    <tr>
      <th>ID</th>
      <th>Name</th>
      <th>Email</th>
      <th>Role</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% users.forEach(user => { %>
      <tr>
        <td><%= user.id %></td>
        <td><%= user.name %></td>
        <td><%= user.email %></td>
        <td><%= user.role %></td>
        <td>
          <% if(user.role !== 'admin') { %>
          <form action="/admin/user/delete/<%= user.id %>" method="POST" style="display:inline">
            <button type="submit" class="btn btn-sm btn-danger">Delete</button>
          </form>
          <% } %>
        </td>
      </tr>
    <% }) %>
  </tbody>
</table>

<h4 class="mt-4">All Notes</h4>
<table class="table table-striped">
  <thead>
    <tr>
      <th>ID</th>
      <th>Title</th>
      <th>User</th>
      <th>Created At</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% notes.forEach(note => { %>
      <tr>
        <td><%= note.id %></td>
        <td><%= note.title %></td>
        <td><%= note.user.name %></td>
        <td><%= note.created_at.toLocaleString() %></td>
        <td>
          <a href="/notes/detail/<%= note.id %>" class="btn btn-sm btn-primary">Detail</a>
        </td>
      </tr>
    <% }) %>
  </tbody>
</table>

<%- include('../layouts/footer') %>
